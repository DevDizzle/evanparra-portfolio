<div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-10 text-center md:text-left">
    <div class="bg-slate-800 p-6 rounded-xl border border-slate-700">
        <p class="text-slate-400 text-sm uppercase tracking-wider font-semibold mb-1">Call Me Directly</p>
        <a href="tel:9046156418" class="text-2xl font-bold text-white hover:text-primary-400 transition-colors">(904) 615-6418</a>
    </div>
    <div class="bg-slate-800 p-6 rounded-xl border border-slate-700">
        <p class="text-slate-400 text-sm uppercase tracking-wider font-semibold mb-1">Email Me</p>
        <a href="mailto:admin@evanparra.ai" class="text-2xl font-bold text-white hover:text-primary-400 transition-colors">admin@evanparra.ai</a>
    </div>
</div>

<form id="contact-form" class="space-y-6">
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    <div>
      <label for="name" class="block text-sm font-medium text-slate-300 mb-2">Name</label>
      <input type="text" id="name" name="name" required placeholder="Jane Doe" class="w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-3 text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-primary-500" />
    </div>
    <div>
      <label for="email" class="block text-sm font-medium text-slate-300 mb-2">Email</label>
      <input type="email" id="email" name="email" required placeholder="jane@example.com" class="w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-3 text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-primary-500" />
    </div>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    <div>
      <label for="service" class="block text-sm font-medium text-slate-300 mb-2">Service Interest</label>
      <select id="service" name="service" class="w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-primary-500">
        <option value="">What can I help with?</option>
        <option value="ml-pipeline">ML Pipeline Architecture</option>
        <option value="agents">AI Agent Development</option>
        <option value="local-audit">Local Business Automation Audit</option>
        <option value="consulting">General Consulting</option>
        <option value="other">Other</option>
      </select>
    </div>
    <div>
      <label for="budget" class="block text-sm font-medium text-slate-300 mb-2">Budget Range</label>
      <select id="budget" name="budget" class="w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-primary-500">
        <option value="">Budget Range (optional)</option>
        <option value="under-5k">Under $5,000</option>
        <option value="5k-15k">$5,000 - $15,000</option>
        <option value="15k-50k">$15,000 - $50,000</option>
        <option value="50k-plus">$50,000+</option>
        <option value="ongoing">Ongoing Retainer</option>
      </select>
    </div>
  </div>

  <div>
    <label for="message" class="block text-sm font-medium text-slate-300 mb-2">Message</label>
    <textarea id="message" name="message" rows="4" placeholder="Tell me about your project..." class="w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-3 text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-primary-500"></textarea>
  </div>

  <div id="form-status" class="hidden rounded-lg p-4"></div>

  <button type="submit" class="w-full bg-primary-600 hover:bg-primary-700 text-white font-bold py-4 rounded-lg transition-colors duration-300 shadow-lg shadow-primary-900/20">
    Send Message
  </button>
</form>

<script>
  const form = document.getElementById('contact-form') as HTMLFormElement;
  const statusDiv = document.getElementById('form-status');

  if (form) {
    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      
      const submitButton = form.querySelector('button[type="submit"]') as HTMLButtonElement;
      const originalText = submitButton.innerText;
      submitButton.disabled = true;
      submitButton.innerText = 'Sending...';

      const formData = new FormData(form);
      const data = Object.fromEntries(formData.entries());

      try {
        const response = await fetch('/api/contact', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(data),
        });

        if (response.ok) {
          form.reset();
          if (statusDiv) {
            statusDiv.textContent = 'Message sent successfully! I will get back to you soon.';
            statusDiv.className = 'bg-green-900/30 text-green-300 border border-green-800 rounded-lg p-4 mb-4';
            statusDiv.classList.remove('hidden');
          }
        } else {
            throw new Error('Form submission failed');
        }
      } catch (error) {
        console.error('Error:', error);
        if (statusDiv) {
            statusDiv.textContent = 'Something went wrong. Please try again or email me directly.';
            statusDiv.className = 'bg-red-900/30 text-red-300 border border-red-800 rounded-lg p-4 mb-4';
            statusDiv.classList.remove('hidden');
        }
      } finally {
        submitButton.disabled = false;
        submitButton.innerText = originalText;
      }
    });
  }
</script>
