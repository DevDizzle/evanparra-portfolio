---
import BaseLayout from './BaseLayout.astro';
import SiteHeader from '../components/SiteHeader.astro';
import Footer from '../components/Footer.astro';

interface Props {
  frontmatter: {
    title: string;
    description: string;
    publishDate: Date;
    author: string;
    image?: string;
    imageAlt?: string;
    tags?: string[];
  };
}

const { frontmatter } = Astro.props;
const formattedDate = new Date(frontmatter.publishDate).toLocaleDateString('en-US', {
  year: 'numeric',
  month: 'long',
  day: 'numeric'
});

const navItems = [
  { label: 'Home', href: '/' },
  { label: 'Blog', href: '/blog' },
  { label: 'Free Audit', href: '/#booking' }
];

// Article structured data
const articleSchema = {
  '@context': 'https://schema.org',
  '@type': 'Article',
  headline: frontmatter.title,
  description: frontmatter.description,
  author: {
    '@type': 'Person',
    name: frontmatter.author,
    url: 'https://evanparra.ai'
  },
  datePublished: frontmatter.publishDate,
  publisher: {
    '@type': 'Organization',
    name: 'Evan Parra AI Consulting',
    url: 'https://evanparra.ai'
  }
};
---

<BaseLayout title={`${frontmatter.title} | Evan Parra`} description={frontmatter.description}>
  <script slot="head" type="application/ld+json" set:html={JSON.stringify(articleSchema)} />
  
  <SiteHeader navItems={navItems} />
  
  <main class="py-16 md:py-24">
    <article class="container max-w-3xl mx-auto px-4">
      <!-- Header -->
      <header class="mb-12">
        <div class="flex items-center gap-2 text-sm text-slate-500 mb-4">
          <time datetime={frontmatter.publishDate.toISOString()}>{formattedDate}</time>
          {frontmatter.tags && frontmatter.tags.length > 0 && (
            <>
              <span>‚Ä¢</span>
              <div class="flex gap-2">
                {frontmatter.tags.map(tag => (
                  <span class="bg-blue-100 text-blue-700 px-2 py-0.5 rounded text-xs">{tag}</span>
                ))}
              </div>
            </>
          )}
        </div>
        <h1 class="text-4xl md:text-5xl font-bold text-slate-900 mb-6 leading-tight">
          {frontmatter.title}
        </h1>
        <p class="text-xl text-slate-600 leading-relaxed">
          {frontmatter.description}
        </p>
      </header>

      {frontmatter.image && (
        <img 
          src={frontmatter.image} 
          alt={frontmatter.imageAlt || frontmatter.title}
          class="w-full rounded-xl mb-12 shadow-lg"
        />
      )}

      <!-- Content -->
      <div class="prose prose-lg prose-slate max-w-none
        prose-headings:font-bold prose-headings:text-slate-900
        prose-h2:text-2xl prose-h2:mt-12 prose-h2:mb-4
        prose-h3:text-xl prose-h3:mt-8 prose-h3:mb-3
        prose-p:text-slate-700 prose-p:leading-relaxed
        prose-a:text-blue-600 prose-a:no-underline hover:prose-a:underline
        prose-strong:text-slate-900
        prose-ul:my-6 prose-li:my-2
        prose-blockquote:border-l-blue-500 prose-blockquote:bg-slate-50 prose-blockquote:py-1">
        <slot />
      </div>

      <!-- CTA -->
      <aside class="mt-16 p-8 bg-gradient-to-r from-blue-600 to-blue-700 rounded-2xl text-white">
        <h3 class="text-2xl font-bold mb-3">Ready to Automate Your Business?</h3>
        <p class="text-blue-100 mb-6">
          Book a free 30-minute AI roadmap session and discover how automation can save you 10+ hours per week.
        </p>
        <a 
          href="/#booking" 
          class="inline-block bg-white text-blue-600 font-semibold px-6 py-3 rounded-lg hover:bg-blue-50 transition-colors"
        >
          Book Free Audit ‚Üí
        </a>
      </aside>

      <!-- Author -->
      <footer class="mt-12 pt-8 border-t border-slate-200">
        <div class="flex items-center gap-4">
          <div class="w-16 h-16 bg-slate-200 rounded-full flex items-center justify-center text-2xl">
            üë®‚Äçüíª
          </div>
          <div>
            <p class="font-semibold text-slate-900">{frontmatter.author}</p>
            <p class="text-slate-500 text-sm">AI Automation Engineer ‚Ä¢ Jacksonville & St. Augustine, FL</p>
          </div>
        </div>
      </footer>
    </article>
  </main>
  
  <Footer />
</BaseLayout>
