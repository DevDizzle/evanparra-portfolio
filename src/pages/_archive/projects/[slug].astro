---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getAllProjects, type Project } from '../../lib/firestore';

export async function getStaticPaths() {
  const projects = await getAllProjects();
  return projects.map((project) => ({
    params: { slug: project.id },
    props: { project },
  }));
}

interface Props {
  project: Project;
}

const { project } = Astro.props;
const { title, description, technologies, githubUrl, liveUrl } = project;
---

<BaseLayout title={title} description={description}>
  <article class="py-20 bg-white">
    <div class="container max-w-4xl mx-auto">
      <header class="mb-12 text-center">
        <h1 class="text-4xl md:text-5xl font-bold text-slate-900 mb-6">{title}</h1>
        <p class="text-xl text-slate-600 max-w-2xl mx-auto">{description}</p>
        
        <div class="flex flex-wrap justify-center gap-4 mt-8">
          {githubUrl && (
            <a href={githubUrl} target="_blank" rel="noopener noreferrer" class="inline-flex items-center px-6 py-3 bg-slate-900 text-white rounded-lg hover:bg-slate-800 transition-colors">
              <i class="fa-brands fa-github mr-2"></i> View Code
            </a>
          )}
          {liveUrl && (
            <a href={liveUrl} target="_blank" rel="noopener noreferrer" class="inline-flex items-center px-6 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors">
              <i class="fa-solid fa-arrow-up-right-from-square mr-2"></i> Live Demo
            </a>
          )}
        </div>
      </header>
      
      <div class="prose prose-lg mx-auto">
        <h2 class="text-2xl font-bold mb-4">Technologies</h2>
        <div class="flex flex-wrap gap-2 mb-8 not-prose">
          {technologies?.map(tech => (
            <span class="px-3 py-1 bg-slate-100 text-slate-700 rounded-full font-medium">{tech}</span>
          ))}
        </div>

         <div class="p-8 bg-slate-50 rounded-xl border border-slate-200 text-center text-slate-500">
            Detailed project case study coming soon.
         </div>
      </div>
    </div>
  </article>
</BaseLayout>
