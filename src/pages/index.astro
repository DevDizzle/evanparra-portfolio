---
import BaseLayout from '../layouts/BaseLayout.astro';
import Hero from '../components/Hero.astro';
import SectionHeading from '../components/SectionHeading.astro';
import CaseStudiesSection from '../components/CaseStudiesSection.astro';
import ServicesSection from '../components/ServicesSection.astro';
import ContactForm from '../components/ContactForm.astro';
import VisionPlayground from '../components/VisionPlayground';
import ProjectGrid from '../components/ProjectGrid';
import { getFeaturedProjects } from '../lib/firestore';

const title = "Data Engineering | Evan Parra | St. Augustine FL";
const description = "ML pipelines, data integration, and AI systems for businesses that need things to actually work.";

const allFeatured = await getFeaturedProjects();
const featuredProjects = allFeatured.filter(p => ['gammarips-mcp', 'gammarips-engine'].includes(p.id));

const structuredData = {
  '@context': 'https://schema.org',
  '@type': 'Organization',
  name: 'Evan Parra AI Consulting',
  url: 'https://evanparra.ai',
  logo: 'https://evanparra.ai/assets/evan-parra-headshot.png',
  description: description,
  founder: {
    '@type': 'Person',
    name: 'Evan Parra'
  },
  contactPoint: {
    '@type': 'ContactPoint',
    telephone: '+1-904-615-6418',
    contactType: 'sales',
    areaServed: 'US',
    availableLanguage: 'en'
  },
  sameAs: [
    'https://www.linkedin.com/in/evanparra',
    'https://github.com/eraphaelparra',
    'https://x.com/ParraEvan'
  ]
};
---

<BaseLayout title={title} description={description}>
    <script type="application/ld+json" set:html={JSON.stringify(structuredData)} slot="head" />
	<Hero />
	
	<!-- Featured Projects (GitHub) -->
	<section class="py-20 bg-white">
		<div class="container">
			<SectionHeading
				eyebrow="Open Source & Portfolio"
				title="Engineering Showcase"
				body="The infrastructure powering GammaRips — production ML pipelines and MCP tooling, open for exploration."
			/>
			<div class="mt-8">
				<ProjectGrid projects={featuredProjects} client:load />
				<div class="mt-10 text-center">
					<a href="/projects" class="inline-flex items-center justify-center px-8 py-3 text-base font-medium text-white bg-primary-600 hover:bg-primary-700 rounded-lg transition-colors duration-300">
						Explore All Projects <span class="ml-2">→</span>
					</a>
				</div>
			</div>
		</div>
	</section>

	<!-- AI Playground (Interactive Demo) -->
	<section class="py-20 bg-slate-50 border-y border-slate-200">
		<div class="container">
			<SectionHeading
				eyebrow="Interactive Demo"
				title="Experience the Tech"
				body="Don't just take my word for it. Test drive my computer vision models and agent workflows right here in the browser."
			/>
			<div class="mt-12">
				<VisionPlayground client:visible />
			</div>
		</div>
	</section>

	<!-- Services Overview -->
	<section class="py-20 bg-white">
		<div class="container">
			<ServicesSection />
		</div>
	</section>

	<!-- Contact -->
	<section id="contact" class="py-20 bg-slate-900 text-white">
		<div class="container">
			<div class="max-w-4xl mx-auto">
				<div class="text-center mb-12">
					<h2 class="text-3xl md:text-4xl font-extrabold mb-4">Let's Build Something</h2>
					<p class="text-xl text-slate-400">Ready to automate your operations? Tell me about your project.</p>
				</div>
				<ContactForm />
			</div>
		</div>
	</section>
</BaseLayout>