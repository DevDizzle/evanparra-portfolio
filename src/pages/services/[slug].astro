--- 
import BaseLayout from '../../layouts/BaseLayout.astro';
import SiteHeader from '../../components/SiteHeader.astro';
import Footer from '../../components/Footer.astro';
import type { Service } from '../../data/services';
import { services } from '../../data/services';

export async function getStaticPaths() {
  return services.map((service) => ({
    params: { slug: service.slug },
    props: { service }
  }));
}

const { service } = Astro.props as { service: Service };

const pageTitle = `${service.title} | Services | Evan Parra`;
const description = service.detail.lead;

const navItems = [
  { label: '← Back to Homepage', href: '/' },
  { label: 'View All Services', href: '/#services' },
  { label: 'Free Assessment', href: '/#booking' }
];

const phoneNumber = '(904) 615-6418';
const telLink = `tel:${phoneNumber.replace(/[^0-9]/g, '')}`;
---
<BaseLayout title={pageTitle} description={description}>
  <div class="min-h-screen flex flex-col bg-gray-50">
    <SiteHeader navItems={navItems} />
    <main class="flex-1">
      <section class="bg-white border-b border-slate-200">
        <div class="container py-16 md:py-20">
          <p class="text-sm uppercase tracking-widest text-blue-600 font-semibold mb-4">Service Detail</p>
          <h1 class="text-3xl md:text-4xl font-extrabold text-slate-900 leading-tight">{service.title}</h1>
          <p class="mt-6 text-lg text-slate-600 leading-relaxed max-w-3xl">{service.detail.lead}</p>
          <div class="mt-8">
            <a href={telLink} class="font-bold text-2xl md:text-3xl text-slate-900 hover:text-blue-600 transition-colors">
                Call {phoneNumber}
            </a>
            <p class="text-slate-600 mt-1">to discuss your project</p>
          </div>
        </div>
      </section>
      <section class="bg-gray-50">
        <div class="container py-16 md:py-20 space-y-16">
          <div>
            <h2 class="text-2xl md:text-3xl font-bold text-slate-900">What You’ll Gain</h2>
            <ul class="mt-6 space-y-4">
              {service.detail.benefits.map((benefit) => (
                <li key={benefit} class="flex items-start gap-3">
                  <span class="mt-2 h-2.5 w-2.5 flex-shrink-0 rounded-full bg-blue-600"></span>
                  <span class="text-lg text-slate-700 leading-relaxed">{benefit}</span>
                </li>
              ))}
            </ul>
          </div>
          <div>
            <h2 class="text-2xl md:text-3xl font-bold text-slate-900">Outcomes You Can Expect</h2>
            <ul class="mt-6 grid gap-4 md:grid-cols-2">
              {service.detail.outcomes.map((outcome) => (
                <li
                  key={outcome}
                  class="bg-white border border-slate-200 rounded-2xl p-5 shadow-sm flex items-start gap-3"
                >
                  <span class="mt-1 text-blue-600" aria-hidden="true">✓</span>
                  <span class="text-base text-slate-700 leading-relaxed">{outcome}</span>
                </li>
              ))}
            </ul>
          </div>
          <div class="grid gap-10 lg:grid-cols-3 lg:items-start">
            <div class="lg:col-span-2 space-y-6">
              <h2 class="text-2xl md:text-3xl font-bold text-slate-900">How We Work Together</h2>
              <ol class="mt-6 space-y-4">
                {service.detail.process.map((step, index) => (
                  <li
                    key={step.title}
                    class="flex items-start gap-4 bg-white border border-slate-200 rounded-2xl p-5 shadow-sm"
                  >
                    <span class="flex h-9 w-9 items-center justify-center rounded-full bg-blue-600 text-white font-semibold text-lg">
                      {String(index + 1).padStart(2, '0')}
                    </span>
                    <div>
                      <h3 class="text-lg font-semibold text-slate-900">{step.title}</h3>
                      <p class="mt-2 text-slate-700 leading-relaxed">{step.description}</p>
                    </div>
                  </li>
                ))}
              </ol>
            </div>
            <aside class="bg-blue-50 border border-blue-100 rounded-2xl p-6 shadow-sm space-y-4">
              <h3 class="text-lg font-semibold text-blue-900">Built for St. Johns County</h3>
              <p class="text-slate-700 leading-relaxed">{service.detail.localFocus}</p>
            </aside>
          </div>
          <div class="bg-white border border-slate-200 rounded-2xl p-6 md:p-10 shadow-lg text-center">
            <p class="text-lg text-slate-700 leading-relaxed max-w-3xl mx-auto">{service.detail.closing}</p>
            <div class="mt-8 flex flex-col sm:flex-row justify-center items-center gap-6">
                <a
                href="/#booking"
                class="inline-flex items-center justify-center bg-blue-700 text-white px-6 py-3 rounded-xl font-semibold shadow-lg hover:bg-blue-800 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-600 focus-visible:ring-offset-2 focus-visible:ring-offset-white"
                >
                Book a Free Assessment
                </a>
                <div>
                    <a href={telLink} class="font-bold text-xl text-slate-900 hover:text-blue-600 transition-colors">
                        Or call {phoneNumber}
                    </a>
                </div>
            </div>
          </div>
        </div>
      </section>
    </main>
    <Footer />
  </div>
</BaseLayout>